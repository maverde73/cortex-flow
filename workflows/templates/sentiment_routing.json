{
  "name": "sentiment_routing",
  "version": "1.0",
  "description": "Sentiment-based conditional routing: Research → Analyze Sentiment → Route based on score",
  "trigger_patterns": [
    "analyze sentiment",
    "sentiment analysis"
  ],
  "nodes": [
    {
      "id": "research",
      "agent": "researcher",
      "instruction": "Research information on: {topic}",
      "depends_on": [],
      "timeout": 300
    },
    {
      "id": "analyze_sentiment",
      "agent": "analyst",
      "instruction": "Analyze the sentiment of this research:\n\n{research}",
      "depends_on": ["research"],
      "timeout": 120
    },
    {
      "id": "positive_report",
      "agent": "writer",
      "instruction": "Create an optimistic report highlighting positive aspects:\n\n{analyze_sentiment}",
      "depends_on": ["analyze_sentiment"],
      "timeout": 180,
      "template": "positive_report"
    },
    {
      "id": "risk_analysis",
      "agent": "writer",
      "instruction": "Create a risk analysis report focusing on concerns:\n\n{analyze_sentiment}",
      "depends_on": ["analyze_sentiment"],
      "timeout": 180,
      "template": "risk_report"
    },
    {
      "id": "balanced_report",
      "agent": "writer",
      "instruction": "Create a balanced report with both positive and negative aspects:\n\n{analyze_sentiment}",
      "depends_on": ["analyze_sentiment"],
      "timeout": 180,
      "template": "balanced_report"
    }
  ],
  "conditional_edges": [
    {
      "from_node": "analyze_sentiment",
      "conditions": [
        {
          "field": "sentiment_score",
          "operator": ">",
          "value": 0.7,
          "next_node": "positive_report"
        },
        {
          "field": "sentiment_score",
          "operator": "<",
          "value": 0.3,
          "next_node": "risk_analysis"
        }
      ],
      "default": "balanced_report"
    }
  ],
  "parameters": {
    "topic": "AI market trends"
  }
}
